# FP過去問マスター

FP2級およびFP3級の学習用Webアプリケーション（Phase 1 MVP）

## 機能

### 実装済み機能（Phase 1）

- ✅ **ダッシュボード**
  - 試験日カウントダウン
  - 今日の学習統計
  - 全体の統計表示
  - 1日の目標達成状況
- ✅ **学習モード選択**
  - ランダム出題
  - 分野別学習
  - 苦手克服モード
  - ブックマーク復習
  - 本日の不正解問題復習
  - 出題数選択（10/20/30/50問）
- ✅ **問題演習機能**
  - 問題表示と解答
  - 即時採点と解説表示
  - 進捗バー
  - ブックマーク機能
- ✅ **結果画面**
  - 正答率の表示
  - 分野別結果の詳細
  - 間違えた問題の一覧と解説
  - 全問題一覧
- ✅ **進捗管理**
  - 全体の進捗統計
  - 過去7日間の活動グラフ
  - 習熟度分布
  - 分野別正答率の表示
  - 最近の学習履歴
- ✅ **設定**
  - 目標級の設定（FP3級/FP2級）
  - 試験日の設定
  - 1日の目標問題数設定
  - サンプルデータのインポート
  - 学習履歴の削除機能
- ✅ **データ管理**
  - IndexedDBによるローカルデータ保存
  - 解答履歴の保存
  - 進捗データの管理
  - ブックマーク管理
- ✅ **レスポンシブデザイン**

## 技術スタック

- React 19.1
- TypeScript 5.9
- Vite 7.1
- React Router 7.9
- Zustand 5.0（状態管理）
- Dexie.js 4.2（IndexedDB）
- TailwindCSS 4.1（スタイリング）
- date-fns 4.1（日付処理）

## セットアップ

### 必要条件

- Node.js 18以上
- npm または yarn

### インストールと起動

```bash
# 依存関係のインストール（既に実行済み）
npm install

# 開発サーバーの起動
npm run dev
```

ブラウザで http://localhost:5174 を開いてアクセスできます。

### ビルド

```bash
# 本番用ビルド
npm run build

# ビルドのプレビュー
npm run preview
```

## 使い方

### 初回起動時

1. アプリを起動する
2. 「設定」画面に移動
3. 「サンプルデータをインポート」ボタンをクリック
4. 10問のサンプル問題がインポートされます
5. 「学習」タブから学習を開始できます

### 学習の流れ

1. **ホーム画面**: 学習統計を確認
2. **学習モード選択**:
   - 出題数を選択（10/20/30/50問）
   - 学習モードを選択
3. **問題演習**:
   - 選択肢を選んで解答
   - 解答確定後、解説を確認
   - 次の問題へ進む
4. **結果画面**: 正答率と統計を確認

### データについて

- すべてのデータはブラウザのIndexedDBに保存されます
- ブラウザのデータを削除すると、学習履歴も削除されます
- 現在はサンプルデータ（10問）のみ提供しています

## 問題の追加方法

### 問題データの形式

問題は JSON 形式で `public/data/sample-questions.json` に記述します。各問題は以下の形式に従います：

```json
{
  "id": "fp3-2024-05-001",
  "grade": "3",
  "year": 2024,
  "session": "5月",
  "category": "life-planning",
  "subcategory": "ライフプランニング",
  "questionType": "true-false",
  "questionText": "問題文をここに記述します。",
  "options": ["○", "×"],
  "correctAnswer": 0,
  "explanation": "解説をここに記述します。",
  "difficulty": "easy",
  "tags": ["タグ1", "タグ2"],
  "createdAt": "2024-10-28T00:00:00.000Z",
  "updatedAt": "2024-10-28T00:00:00.000Z"
}
```

### フィールドの説明

| フィールド | 型 | 説明 | 例 |
|----------|---|------|-----|
| `id` | string | 問題の一意なID | `"fp3-2024-05-001"` |
| `grade` | string | 級（"3" または "2"） | `"3"` |
| `year` | number | 年度 | `2024` |
| `session` | string | 実施回 | `"5月"`, `"9月"`, `"1月"` |
| `category` | string | カテゴリID（下記参照） | `"life-planning"` |
| `subcategory` | string | サブカテゴリ名 | `"ライフプランニング"` |
| `questionType` | string | 問題タイプ（"true-false" または "multiple-choice"） | `"true-false"` |
| `questionText` | string | 問題文 | `"公的年金の..."` |
| `options` | array | 選択肢の配列 | `["○", "×"]` |
| `correctAnswer` | number | 正解のインデックス（0から） | `0` |
| `explanation` | string | 解説文 | `"正解は○です。..."` |
| `difficulty` | string | 難易度（"easy", "medium", "hard"） | `"easy"` |
| `tags` | array | タグの配列 | `["年金", "受給資格"]` |
| `createdAt` | string | 作成日時（ISO 8601形式） | `"2024-10-28T00:00:00.000Z"` |
| `updatedAt` | string | 更新日時（ISO 8601形式） | `"2024-10-28T00:00:00.000Z"` |

### 利用可能なカテゴリID

| カテゴリID | カテゴリ名 |
|-----------|-----------|
| `life-planning` | ライフプランニングと資金計画 |
| `risk-management` | リスク管理 |
| `financial-assets` | 金融資産運用 |
| `tax-planning` | タックスプランニング |
| `real-estate` | 不動産 |
| `inheritance` | 相続・事業承継 |

### 問題の追加手順

1. **問題データファイルを編集**
   ```bash
   # エディタで開く
   open public/data/sample-questions.json
   ```

2. **既存の問題を参考に新しい問題を追加**
   - JSON配列の末尾に新しい問題オブジェクトを追加
   - IDは重複しないように注意（例: `fp3-2024-05-011`, `fp3-2024-05-012`...）
   - カンマ区切りを忘れずに

3. **○×問題の例**
   ```json
   {
     "id": "fp3-2024-05-011",
     "grade": "3",
     "year": 2024,
     "session": "5月",
     "category": "life-planning",
     "subcategory": "社会保険",
     "questionType": "true-false",
     "questionText": "健康保険の被保険者は、原則として75歳になると後期高齢者医療制度の被保険者となる。",
     "options": ["○", "×"],
     "correctAnswer": 0,
     "explanation": "正解は○です。75歳になると自動的に後期高齢者医療制度の被保険者となります。",
     "difficulty": "easy",
     "tags": ["健康保険", "後期高齢者医療"],
     "createdAt": "2024-10-28T00:00:00.000Z",
     "updatedAt": "2024-10-28T00:00:00.000Z"
   }
   ```

4. **3択・4択問題の例**
   ```json
   {
     "id": "fp3-2024-05-012",
     "grade": "3",
     "year": 2024,
     "session": "5月",
     "category": "financial-assets",
     "subcategory": "投資信託",
     "questionType": "multiple-choice",
     "questionText": "NISA（少額投資非課税制度）の成長投資枠で、年間の非課税投資枠はいくらか。",
     "options": ["120万円", "240万円", "360万円"],
     "correctAnswer": 1,
     "explanation": "正解は240万円です。2024年からの新しいNISA制度では、成長投資枠が年間240万円に設定されています。",
     "difficulty": "medium",
     "tags": ["NISA", "非課税制度"],
     "createdAt": "2024-10-28T00:00:00.000Z",
     "updatedAt": "2024-10-28T00:00:00.000Z"
   }
   ```

5. **JSONの構文チェック**
   - 最後の問題の後にカンマを付けないこと
   - すべての文字列はダブルクォートで囲むこと
   - 配列とオブジェクトの括弧の対応を確認

6. **アプリで問題をインポート**
   - 開発サーバーを起動（既に起動中の場合はブラウザをリロード）
   - 「設定」画面に移動
   - 「学習履歴を削除」ボタンで既存データをクリア（オプション）
   - 「サンプルデータをインポート」ボタンをクリック
   - インポート成功のメッセージを確認

### トラブルシューティング

- **問題が表示されない**: JSON形式が正しいか確認してください。ブラウザの開発者ツール（F12）のコンソールでエラーを確認できます。
- **インポートエラー**: `public/data/sample-questions.json` のパスが正しいか確認してください。
- **重複した問題**: IDが重複している可能性があります。各問題に一意のIDを設定してください。

## プロジェクト構造

```
fp-study-app/
├── public/
│   └── data/
│       └── sample-questions.json  # サンプル問題データ
├── src/
│   ├── components/
│   │   ├── common/               # 共通コンポーネント
│   │   └── layout/               # レイアウトコンポーネント
│   ├── constants/                # 定数定義
│   ├── pages/                    # ページコンポーネント
│   ├── services/                 # ビジネスロジック
│   ├── store/                    # Zustandストア
│   ├── types/                    # 型定義
│   ├── utils/                    # ユーティリティ関数
│   ├── App.tsx                   # ルートコンポーネント
│   └── main.tsx                  # エントリーポイント
└── package.json
```

## 今後の拡張（Phase 2以降）

- 問題数の拡大（10年分、約3,600問）
- 年度別学習モード
- 詳細な統計とグラフ表示（Recharts）
- 問題検索機能
- 学習リマインダー
- データのエクスポート/インポート
- iOS/Androidアプリ化（Capacitor）

## ライセンス

Private
